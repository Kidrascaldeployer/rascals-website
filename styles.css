/* ===================== TOKENS & LAYOUT ===================== */
:root{
  --max: 92vw;
  --hard-max: 1400px;

  --space-1:.5rem; --space-2:.75rem; --space-3:1rem;
  --space-4:1.5rem; --space-5:2.25rem; --space-6:3.5rem;

  --bg-0:#060b17; --bg-1:#0b1328;
  --fg-0:#e8ecf5; --fg-1:#b8c0d4;

  --glass:rgba(255,255,255,.05);
  --glass-stroke:rgba(255,255,255,.10);

  --grad-a:#3b82f6; --grad-b:#a855f7; --grad-c:#22d3ee;

  --radius:16px;
  --shadow-1:0 6px 22px rgba(0,0,0,.32);
  --shadow-2:0 14px 50px rgba(0,0,0,.45);
}

*{ box-sizing:border-box }
html{ scroll-behavior:smooth; }

/* ================= HARD CLIP (no visual bleed) =============== */
html, body{
  max-width:100%;
  overflow-x: clip;          /* modern */
  overflow-y: overlay;       /* nicer scrollbars where supported */
}
@supports not (overflow: clip){
  html, body{ overflow-x:hidden; }
}

/* Isolate paint & clip critical wrappers */
.wrap,
.section,
.hero,
.hero-media,
.grid.gallery,
.carousel,
.car-track,
.card-media{
  overflow: clip;            /* modern */
  overflow: hidden;          /* fallback */
  contain: paint;            /* isolate GPU layers so nothing leaks */
  overflow-clip-margin: 0;   /* avoid shadow slivers at edges */
}

/* ===================== BASE ===================== */
body{
  font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--fg-0);
  background:
    radial-gradient(1000px 700px at 10% -10%, #0f244a, transparent 60%),
    radial-gradient(900px 600px at 90% -20%, #10223f, transparent 60%),
    linear-gradient(180deg, var(--bg-1), var(--bg-0));
}

.wrap{ max-width:min(var(--hard-max),var(--max)); margin-inline:auto; padding:0 var(--space-3) }
.row{ display:flex; gap:.8rem; align-items:center }
.mt-12{ margin-top:.75rem } .mt-16{ margin-top:1rem }
.muted{ color:var(--fg-1) }
.suptitle{ letter-spacing:.12em; text-transform:uppercase; color:rgba(255,255,255,.65); font-weight:600; margin-bottom:.35rem }
.display{ font-size:clamp(2.6rem,6.2vw,4.4rem); line-height:1.02; font-weight:800; letter-spacing:.1px }
.grad{ background:linear-gradient(90deg,var(--grad-a),var(--grad-b),var(--grad-c)); -webkit-background-clip:text; background-clip:text; color:transparent }

/* ================= SURFACES & BUTTONS ================= */
.glass{ background:var(--glass); border:1px solid var(--glass-stroke); border-radius:var(--radius); box-shadow:var(--shadow-1); backdrop-filter:blur(10px) }

.seg-pill{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:108px; padding:.55rem .95rem; border-radius:999px;
  border:1px solid rgba(255,255,255,.12); background:rgba(10,15,28,.65);
  color:var(--fg-0); text-decoration:none; font-weight:600;
  transition:transform .15s, box-shadow .2s, background .2s
}
.seg-pill:hover{ transform:translateY(-1px); box-shadow:0 8px 24px rgba(0,0,0,.35) }
.seg-pill.primary{ background:linear-gradient(135deg,var(--grad-a),var(--grad-b)); border:none; color:#fff }
.seg-pill.primary.glow{ position:relative }
.seg-pill.primary.glow::after{
  content:""; position:absolute; inset:-2px; border-radius:999px; z-index:-1;
  background: radial-gradient(60% 60% at 40% 40%, rgba(59,130,246,.45), transparent 60%),
             radial-gradient(40% 40% at 70% 30%, rgba(168,85,247,.35), transparent 60%);
  filter:blur(10px); opacity:.55
}

/* ===================== HEADER ===================== */
.site-header{ position:sticky; top:0; z-index:50; transition: padding .18s ease, box-shadow .18s ease }
.header-split{ display:grid; grid-template-columns:1fr auto 1fr 44px; align-items:center; gap:1rem; padding:1rem var(--space-3) }
.site-header.scrolled{ box-shadow:0 10px 30px rgba(0,0,0,.35) }
.brand-center{ justify-self:center }
.logo-brand{ height:56px }
.nav-left,.nav-right{ display:flex; gap:.6rem; align-items:center; flex-wrap:wrap }
.nav-right{ justify-content:flex-end }
.hamburger{ justify-self:end; width:44px; height:44px; border-radius:12px; background:transparent; border:1px solid var(--glass-stroke); display:none }
.hamburger span{ display:block; height:2px; background:var(--fg-0); margin:7px 8px }

/* ================= SECTIONS & DIVIDERS ================= */
.section{ padding:var(--space-6) 0 var(--space-5) }
.section-title{ font-size:clamp(1.2rem,2.3vw,1.6rem); font-weight:700; margin:0 0 .5rem }
.section-lead{ margin:.2rem 0 1rem }
.section-divider{ height:1px; margin:var(--space-5) auto; max-width:min(var(--hard-max),var(--max)); background:linear-gradient(90deg,transparent,rgba(255,255,255,.08),transparent) }

/* ===================== HERO ===================== */
.hero{ padding:var(--space-6) 0 var(--space-4) }
.hero-inner{ display:grid; grid-template-columns:1fr 1fr; gap:var(--space-4); align-items:center }
.hero-media{ position:relative; border-radius:var(--radius) }
.hero-media img{ width:100%; height:100%; max-height:min(54vw, 520px); object-fit:cover; display:block; border-radius:inherit }
.hero-media.fit-contain img{ object-fit:contain; background:rgba(0,0,0,.25) }

/* parallax glow */
.hero-media::after{
  content:""; position:absolute; inset:0; border-radius:inherit;
  box-shadow:0 0 140px 40px rgba(59,130,246,.15) inset; pointer-events:none;
  transition:transform .25s ease;
  transform:translate(var(--tx,0),var(--ty,0));
}

/* preview tab */
.hero-preview-tab{ position:absolute; top:.5rem; right:.5rem; z-index:2; border-radius:999px; border:1px solid rgba(255,255,255,.25); background:rgba(0,0,0,.45); color:#fff; padding:.35rem .7rem; font-weight:600; cursor:pointer }
.hero-preview-tab[aria-pressed="true"]{ background:rgba(59,130,246,.55) }

.ring{ position:absolute; border-radius:50%; filter:blur(28px); opacity:.45; pointer-events:none }
.ring-1{ width:200px; height:200px; right:-60px; bottom:-60px; background:radial-gradient(circle at 30% 30%, #5ab0ff, transparent 60%) }
.ring-2{ width:220px; height:220px; left:-70px; top:-70px; background:radial-gradient(circle at 60% 60%, #a377ff, transparent 60%) }
.accent-bar{ height:2px; background:linear-gradient(90deg,var(--grad-a),var(--grad-b),var(--grad-c)); opacity:.5; margin-top:1rem }

/* hero chips */
.chip{ padding:.25rem .6rem; border-radius:999px; border:1px solid rgba(255,255,255,.15); opacity:.9; font-weight:600 }

/* ================= RASCALS EDITS GRID ================= */
.grid.gallery{ display:grid; gap:1.25rem; grid-template-columns:repeat(4,minmax(0,1fr)) }
.card-media{
  position:relative;
  padding:.5rem;
  border-radius:22px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  box-shadow:var(--shadow-1);
  transition:transform .18s ease, box-shadow .18s ease;
  cursor:zoom-in;
}
.card-media:hover{ transform:translateY(-4px); box-shadow:var(--shadow-2) }
.card-media::before{
  content:"";
  position:absolute; inset:0; border-radius:inherit; padding:1.5px;
  background:linear-gradient(135deg, var(--grad-a), var(--grad-b)); opacity:.35; pointer-events:none;
  /* gradient rim using masking */
  -webkit-mask-image: linear-gradient(#000, #000), linear-gradient(#000, #000);
  -webkit-mask-origin: content-box, border-box;
  -webkit-mask-clip: content-box, border-box;
  -webkit-mask-composite: xor;
          mask-image: linear-gradient(#000, #000), linear-gradient(#000, #000);
          mask-origin: content-box, border-box;
          mask-clip: content-box, border-box;
          mask-composite: exclude;
}
.card-media img{ width:100%; aspect-ratio:1/1; object-fit:cover; display:block; border-radius:18px }

/* ===================== CAROUSEL ===================== */
.carousel{ position:relative; padding:.75rem }
.car-track{
  display:flex; gap:.75rem; padding:.25rem;
  /* fade edges so off-screen slides never peek */
  -webkit-mask-image: linear-gradient(to right, transparent 0%, #000 8%, #000 92%, transparent 100%);
          mask-image: linear-gradient(to right, transparent 0%, #000 8%, #000 92%, transparent 100%);
}
.car-track img{
  width:min(68vw,420px); aspect-ratio:1/1; object-fit:cover;
  border-radius:12px; flex:0 0 auto; cursor:zoom-in;
  transition: opacity .35s ease; display:block;
}
.car-track img.is-swapping{ opacity:0; }
.car-btn{ position:absolute; top:50%; transform:translateY(-50%); width:42px; height:42px; border-radius:999px; border:1px solid var(--glass-stroke); background:rgba(0,0,0,.35); backdrop-filter:blur(10px); cursor:pointer }
.car-btn:hover{ box-shadow:var(--shadow-1) }
.car-btn.prev{ left:6px } .car-btn.next{ right:6px }
.car-progress{ height:3px; background:rgba(255,255,255,.1); margin:.4rem .6rem .1rem; border-radius:999px; overflow:hidden }
.car-progress > i{ display:block; height:100%; background:linear-gradient(90deg,var(--grad-a),var(--grad-b)); width:0% }

/* ====================== ABOUT ====================== */
.about-card{
  display:grid;
  grid-template-columns: clamp(320px, 42vw, 520px) 1fr;
  gap:1.25rem;
  align-items:center;
  padding:1.25rem 1.5rem;
  border-radius:22px;
}
.about-media{ position:relative; border-radius:22px; overflow:hidden }
.about-media::before{
  content:""; position:absolute; inset:0; border-radius:inherit; padding:2px;
  background:linear-gradient(135deg, var(--grad-a), var(--grad-b)); opacity:.45; pointer-events:none;
  -webkit-mask-image: linear-gradient(#000, #000), linear-gradient(#000, #000);
  -webkit-mask-origin: content-box, border-box;
  -webkit-mask-clip: content-box, border-box;
  -webkit-mask-composite: xor;
          mask-image: linear-gradient(#000, #000), linear-gradient(#000, #000);
          mask-origin: content-box, border-box;
          mask-clip: content-box, border-box;
          mask-composite: exclude;
}
.about-avatar-lg{ width:100%; height:auto; aspect-ratio:4/3; object-fit:cover; border-radius:20px }
.about-content{ max-width:72ch }
.about-header{ display:block; margin-bottom:.35rem }
.about-lead{ color:var(--fg-0); opacity:.92; line-height:1.7 }
.about-actions{ margin-top:.9rem }
.about-tags{ display:flex; flex-wrap:wrap; gap:.5rem; margin:.9rem 0 0; padding:0; list-style:none }
.about-tags .chip{ padding:.3rem .7rem; border-radius:999px; border:1px solid rgba(255,255,255,.15); font-weight:600; opacity:.9 }

@supports not (mask-image: linear-gradient(#000, #000)){
  .about-media{ box-shadow: 0 0 0 2px rgba(255,255,255,.25) inset }
}
.hover-tilt:hover{ transform: rotate(-2deg) scale(1.05); box-shadow: 0 18px 45px rgba(59,130,246,.45), 0 0 30px rgba(168,85,247,.35); transition: transform .4s ease, box-shadow .4s ease }

/* ===================== FOOTER ===================== */
.segmented-nav{
  display:flex; flex-wrap:wrap; gap:.6rem; align-items:center;
  background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.12);
  border-radius:999px; padding:.25rem;
}
.footer-inner{ display:flex; flex-direction:column; align-items:center; gap:.75rem; text-align:center }
.footer-nav{ justify-content:center; margin-inline:auto }

/* ===================== LIGHTBOX ===================== */
.lightbox{ position: fixed; inset: 0; display:none; align-items:center; justify-content:center; background: rgba(0,0,0,.7); z-index:1000; padding:2rem }
.lightbox.is-open{ display:flex; animation: fadeIn .18s ease-out }
.lightbox img{ max-width:min(94vw, 1400px); max-height:86vh; border-radius:18px; box-shadow: 0 30px 80px rgba(0,0,0,.5) }
.lightbox-close{ position:absolute; top:1rem; right:1rem; width:44px; height:44px; border-radius:999px; border:1px solid rgba(255,255,255,.35); background:rgba(0,0,0,.45); color:#fff; font-size:28px; line-height:42px; text-align:center; cursor:pointer }
.lightbox-close:hover{ box-shadow: var(--shadow-1) }

/* ===================== BACKGROUND CANVAS ===================== */
#bgCanvas { position: fixed; inset: 0; width: 100vw; height: 100vh; z-index: -1; background: #060b17 }

/* ===================== STUDIO OVERLAY ===================== */
body.no-scroll{ overflow:hidden }
.studio-ovl{ position:fixed; inset:0; z-index:1100; display:none; opacity:0; transform:translateY(6px); transition:opacity .18s ease, transform .18s ease }
.studio-ovl.is-open{ display:block; opacity:1; transform:none }
.ovl-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(4px) }
.ovl-shell{ position:absolute; inset:10px; display:flex; flex-direction:column; border-radius:18px; overflow:hidden; background:rgba(8,12,24,.92) }
.ovl-topbar{ display:flex; align-items:center; justify-content:space-between; padding:.6rem .9rem; border-bottom:1px solid var(--glass-stroke); background:rgba(0,0,0,.35) }
.ovl-title{ font-weight:700; opacity:.9 }
.ovl-close{ width:40px; height:40px; border-radius:999px; border:1px solid rgba(255,255,255,.25); background:rgba(0,0,0,.45); color:#fff; font-size:24px; line-height:38px; cursor:pointer }
.ovl-close:hover{ box-shadow:var(--shadow-1) }
#studioFrame{ width:100%; height:calc(100% - 56px); border:0; background:#0e1730; display:block }

/* ===================== Toast + Back to top ===================== */
.toast{ position:fixed; bottom:18px; left:50%; transform:translateX(-50%); background:rgba(12,16,28,.88); border:1px solid rgba(255,255,255,.12); padding:.55rem .9rem; border-radius:12px; box-shadow:0 10px 30px rgba(0,0,0,.35); opacity:0; pointer-events:none; transition:opacity .2s ease; z-index:1200 }
.toast.is-on{ opacity:1 }
.to-top{ position:fixed; right:14px; bottom:14px; display:none; z-index:1200; background:linear-gradient(135deg,var(--grad-a),var(--grad-b)); color:#fff; border:none }

/* ===================== A11Y ===================== */
.card-media:focus-within img,
.car-track img:focus,
.hero-media img:focus{ outline:3px solid var(--grad-a); outline-offset:3px; border-radius:14px }
.reveal-on-scroll{ opacity:0; transform:translateY(12px); transition:opacity .5s ease, transform .5s ease }
.reveal-on-scroll.is-visible{ opacity:1; transform:none }
:focus-visible{ outline:2px solid var(--grad-a); outline-offset:2px; border-radius:8px }

/* ===================== RESPONSIVE ===================== */
@media (max-width:1200px){ .grid.gallery{ grid-template-columns:repeat(3,1fr) } }
@media (max-width:900px){
  .hero-inner{ grid-template-columns:1fr }
  .grid.gallery{ grid-template-columns:repeat(2,1fr) }
  .nav-left,.nav-right{ display:none }
  .hamburger{ display:block }
}
@media (max-width:620px){ .grid.gallery{ grid-template-columns:1fr } }

/* ===================== ANIMATION ===================== */
@keyframes fadeIn{ from{opacity:0} to{opacity:1} }

/* Image safety fallback */
img{ max-width:100%; height:auto; display:block }
